<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章详情</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <a href="index.html" class="back-link">← 返回</a>
        <h1>文章详情</h1>
    </header>

    <div class="container">
        <article class="blog-detail" id="blogDetail">
            <!-- 详情内容将通过JS动态生成 -->
        </article>
        
        <!-- 分享按钮区域 -->
        <div class="share-section">
            <div class="share-title">分享这篇文章</div>
            <div class="share-buttons">
                <button class="share-btn weibo" data-platform="weibo">
                    <svg viewBox="0 0 24 24">
                        <path d="M10.5 16c0-1.5.5-3 2-4v-.5c0-3 2-5.5 5-5.5 1 0 2 .5 3 1 .5-1 1-2 1-3 3 0 5.5 2 5.5 5 0 1-.5 2-1 3 1 .5 1.5 1.5 1.5 2.5 0 2-2 4-4 4 0 1.5-1.5 3-3.5 3-1.5 0-3-.5-4-1.5-1 .5-2.5 1-4 1-3.5 0-6-2.5-6-6 0-1 .5-2.5 1.5-3.5.5 1 1 2 1 3.5z"/>
                    </svg>
                    <span>微博</span>
                </button>
                <button class="share-btn wechat" data-platform="wechat">
                    <svg viewBox="0 0 24 24">
                        <path d="M8.5 3.5c-1.1 0-2 .9-2 2v1c0 .6-.4 1-1 1s-1-.4-1-1v-1c0-2.2 1.8-4 4-4h1c.6 0 1 .4 1 1s-.4 1-1 1h-1zm7 0c-1.1 0-2 .9-2 2v1c0 .6-.4 1-1 1s-1-.4-1-1v-1c0-2.2 1.8-4 4-4h1c.6 0 1 .4 1 1s-.4 1-1 1h-1zm4 4c0-1.1-.9-2-2-2h-1c-.6 0-1-.4-1-1s.4-1 1-1h1c2.2 0 4 1.8 4 4v1c0 .6-.4 1-1 1s-1-.4-1-1v-1zm-15 7c0-1.1.9-2 2-2h1c.6 0 1 .4 1 1s-.4 1-1 1h-1c-.6 0-1 .4-1 1v1c0 .6-.4 1-1 1s-1-.4-1-1v-1zm15 0c0-1.1.9-2 2-2h1c.6 0 1 .4 1 1s-.4 1-1 1h-1c-.6 0-1 .4-1 1v1c0 .6-.4 1-1 1s-1-.4-1-1v-1zm-7-3c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"/>
                    </svg>
                    <span>微信</span>
                </button>
                <button class="share-btn qq" data-platform="qq">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm-1 15h2v2h-2v-2zm2.5-1.2c-.9.3-1.8.5-2.5.5-.7 0-1.6-.2-2.5-.5-.3-.1-.4-.4-.3-.7.1-.3.4-.4.7-.3.8.2 1.6.4 2.1.4.5 0 1.3-.2 2.1-.4.3-.1.6 0 .7.3.1.3 0 .6-.3.7zm3-2.3c-.5.4-1.1.7-1.8.9-.7.2-1.5.3-2.2.3-.7 0-1.5-.1-2.2-.3-.7-.2-1.3-.5-1.8-.9-.3-.2-.3-.6-.1-.9.2-.3.6-.3.9-.1.4.3.9.5 1.4.7.5.2 1.1.3 1.6.3.5 0 1.1-.1 1.6-.3.5-.2 1-.4 1.4-.7.3-.2.7-.2.9.1.2.3.2.7-.1.9z"/>
                    </svg>
                    <span>QQ</span>
                </button>
                <button class="share-btn copy" data-platform="copy">
                    <svg viewBox="0 0 24 24">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                    </svg>
                    <span>复制链接</span>
                </button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>© 2023 透明笔记 · 保留所有权利</p>
    </footer>

    <script>
        // 从URL获取文章ID
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');
        const currentUrl = encodeURIComponent(window.location.href);
        const currentTitle = encodeURIComponent(document.title);
        
        // 加载并显示文章详情
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const post = data.posts.find(p => p.id == postId);
                if (post) {
                    displayPostDetail(post);
                    setupShareButtons(post.title);
                } else {
                    document.getElementById('blogDetail').innerHTML = '<p class="no-results">文章未找到</p>';
                }
            });
        
        function displayPostDetail(post) {
            const detailContainer = document.getElementById('blogDetail');
            
            detailContainer.innerHTML = `
                <h2>${post.title}</h2>
                <div class="post-meta">
                    <span class="date">${post.date}</span>
                    <div class="tags">
                        ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
                <div class="post-content">
                    ${post.content}
                </div>
            `;
            
            // 更新页面标题
            document.title = `${post.title} - 透明笔记`;
        }
        
        // 设置分享功能
        function setupShareButtons(title) {
            const shareTitle = encodeURIComponent(title);
            const shareUrl = encodeURIComponent(window.location.href);
            
            document.querySelectorAll('.share-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const platform = btn.dataset.platform;
                    
                    switch(platform) {
                        case 'weibo':
                            window.open(`http://service.weibo.com/share/share.php?url=${shareUrl}&title=${shareTitle}`);
                            break;
                        case 'wechat':
                            alert('请使用微信"扫一扫"分享当前页面');
                            break;
                        case 'qq':
                            window.open(`https://connect.qq.com/widget/shareqq/index.html?url=${shareUrl}&title=${shareTitle}`);
                            break;
                        case 'copy':
                            navigator.clipboard.writeText(window.location.href)
                                .then(() => alert('链接已复制到剪贴板'))
                                .catch(() => {
                                    // 兼容旧浏览器
                                    const textarea = document.createElement('textarea');
                                    textarea.value = window.location.href;
                                    document.body.appendChild(textarea);
                                    textarea.select();
                                    document.execCommand('copy');
                                    document.body.removeChild(textarea);
                                    alert('链接已复制');
                                });
                            break;
                    }
                });
            });
        }
    </script>
    <!-- 在</body>标签前添加 -->
<script src="theme.js"></script>
</body>
</html>